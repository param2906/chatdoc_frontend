function Jt(t){return Object.keys(t).reduce((e,r)=>{var s=t[r];return e[r]=Object.assign({},s),!Ot(s.value)||function(n){return Object.prototype.toString.call(n)==="[object Function]"}(s.value)||Array.isArray(s.value)||(e[r].value=Object.assign({},s.value)),Array.isArray(s.value)&&(e[r].value=s.value.slice(0)),e},{})}function st(t){if(t)try{return JSON.parse(t)}catch{return t}}function nt(t,e,r){if(r==null||r===!1)return t.removeAttribute(e);let s=JSON.stringify(r);t.__updating[e]=!0,s==="true"&&(s=""),t.setAttribute(e,s),Promise.resolve().then(()=>delete t.__updating[e])}function Ot(t){return t!=null&&(typeof t=="object"||typeof t=="function")}var ve,we;let qe;function Qt(t,e){const r=Object.keys(e);return class extends t{static get observedAttributes(){return r.map(s=>e[s].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(i,a){const l=Jt(a);return Object.keys(a).forEach(c=>{const h=l[c],u=i.getAttribute(h.attribute),p=i[c];u&&(h.value=h.parse?st(u):u),p!=null&&(h.value=Array.isArray(p)?p.slice(0):p),h.reflect&&nt(i,h.attribute,h.value),Object.defineProperty(i,c,{get:()=>h.value,set(f){var d=h.value;h.value=f,h.reflect&&nt(this,h.attribute,h.value);for(let b=0,k=this.__propertyChangedCallbacks.length;b<k;b++)this.__propertyChangedCallbacks[b](c,f,d)},enumerable:!0,configurable:!0})}),l}(this,e);var s=function(i){return Object.keys(i).reduce((a,l)=>(a[l]=i[l].value,a),{})}(this.props),n=this.Component,o=qe;try{(qe=this).__initialized=!0,function(i){return typeof i=="function"&&i.toString().indexOf("class")===0}(n)?new n(s,{element:this}):n(s,{element:this})}finally{qe=o}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var s=null;s=this.__releaseCallbacks.pop();)s(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(s,n,o){!this.__initialized||this.__updating[s]||(s=this.lookupProp(s))in e&&(o==null&&!this[s]||(this[s]=e[s].parse?st(o):o))}lookupProp(s){if(e)return r.find(n=>s===n||s===e[n].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(s){this.__releaseCallbacks.push(s)}addPropertyChangedCallback(s){this.__propertyChangedCallbacks.push(s)}}}function Zt(t,e={},r={}){const{BaseElement:s=HTMLElement,extension:n}=r;return o=>{if(!t)throw new Error("tag is required to register a Component");let i=customElements.get(t);return i?i.prototype.Component=o:((i=Qt(s,function(a){return a?Object.keys(a).reduce((l,c)=>{var h=a[c];return l[c]=Ot(h)&&"value"in h?h:{value:h},l[c].attribute||(l[c].attribute=function(u){return u.replace(/\.?([A-Z]+)/g,(p,f)=>"-"+f.toLowerCase()).replace("_","-").replace(/^-/,"")}(c)),l[c].parse="parse"in l[c]?l[c].parse:typeof l[c].value!="string",l},{}):{}}(e))).prototype.Component=o,i.prototype.registeredTag=t,customElements.define(t,i,n)),i}}(ve=self.document)&&!ve.getElementById("livereloadscript")&&((we=ve.createElement("script")).async=1,we.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",we.id="livereloadscript",ve.getElementsByTagName("head")[0].appendChild(we));const Oe=Symbol("solid-proxy"),er=Symbol("solid-track"),Pe={equals:(t,e)=>t===e};let Pt=Bt;const ee=1,$e=2,$t={owned:null,cleanups:null,context:null,owner:null};var I=null;let De=null,B=null,M=null,Y=null,Ne=0;function Ce(t,e){const r=B,s=I,n=t.length===0,o=n?$t:{owned:null,cleanups:null,context:null,owner:e===void 0?s:e},i=n?t:()=>t(()=>X(()=>Be(o)));I=o,B=null;try{return be(i,!0)}finally{B=r,I=s}}function z(t,e){const r={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},Pe,e):Pe).equals||void 0};return[Rt.bind(r),s=>(typeof s=="function"&&(s=s(r.value)),Tt(r,s))]}function L(t,e,r){ge(Ze(t,e,!1,ee))}function ue(t,e,r){Pt=tr,(t=Ze(t,e,!1,ee)).user=!0,Y?Y.push(t):ge(t)}function q(t,e,r){return r=r?Object.assign({},Pe,r):Pe,(t=Ze(t,e,!0,0)).observers=null,t.observerSlots=null,t.comparator=r.equals||void 0,ge(t),Rt.bind(t)}function X(t){if(B===null)return t();var e=B;B=null;try{return t()}finally{B=e}}function ne(t){ue(()=>X(t))}function Qe(t){return I!==null&&(I.cleanups===null?I.cleanups=[t]:I.cleanups.push(t)),t}function Rt(){var t;return this.sources&&this.state&&(this.state===ee?ge(this):(t=M,M=null,be(()=>Te(this),!1),M=t)),B&&(t=this.observers?this.observers.length:0,B.sources?(B.sources.push(this),B.sourceSlots.push(t)):(B.sources=[this],B.sourceSlots=[t]),this.observers?(this.observers.push(B),this.observerSlots.push(B.sources.length-1)):(this.observers=[B],this.observerSlots=[B.sources.length-1])),this.value}function Tt(t,e,r){var s=t.value;return t.comparator&&t.comparator(s,e)||(t.value=e,t.observers&&t.observers.length&&be(()=>{for(let i=0;i<t.observers.length;i+=1){var n=t.observers[i],o=De&&De.running;o&&De.disposed.has(n),(o?n.tState:n.state)||((n.pure?M:Y).push(n),n.observers&&Lt(n)),o||(n.state=ee)}if(1e6<M.length)throw M=[],new Error},!1)),e}function ge(t){var e,r,s;t.fn&&(Be(t),e=I,r=B,s=Ne,function(n,o,i){let a;try{a=n.fn(o)}catch(l){return n.pure&&(n.state=ee,n.owned&&n.owned.forEach(Be),n.owned=null),n.updatedAt=i+1,jt(l)}(!n.updatedAt||n.updatedAt<=i)&&(n.updatedAt!=null&&"observers"in n?Tt(n,a):n.value=a,n.updatedAt=i)}(B=I=t,t.value,s),B=r,I=e)}function Ze(t,e,r,s=ee,n){return t={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:I,context:null,pure:r},I!==null&&I!==$t&&(I.owned?I.owned.push(t):I.owned=[t]),t}function Re(t){if(t.state!==0){if(t.state===$e)return Te(t);if(t.suspense&&X(t.suspense.inFallback))return t.suspense.effects.push(t);const r=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Ne);)t.state&&r.push(t);for(let s=r.length-1;0<=s;s--){var e;(t=r[s]).state===ee?ge(t):t.state===$e&&(e=M,M=null,be(()=>Te(t,r[0]),!1),M=e)}}}function be(t,e){if(M)return t();let r=!1;e||(M=[]),Y?r=!0:Y=[],Ne++;try{var s=t();return function(n){if(M&&(Bt(M),M=null),!n){const o=Y;Y=null,o.length&&be(()=>Pt(o),!1)}}(r),s}catch(n){r||(Y=null),M=null,jt(n)}}function Bt(t){for(let e=0;e<t.length;e++)Re(t[e])}function tr(t){let e,r=0;for(e=0;e<t.length;e++){var s=t[e];s.user?t[r++]=s:Re(s)}for(e=0;e<r;e++)Re(t[e])}function Te(t,e){for(let n=t.state=0;n<t.sources.length;n+=1){var r,s=t.sources[n];s.sources&&((r=s.state)===ee?s!==e&&(!s.updatedAt||s.updatedAt<Ne)&&Re(s):r===$e&&Te(s,e))}}function Lt(t){for(let r=0;r<t.observers.length;r+=1){var e=t.observers[r];e.state||(e.state=$e,(e.pure?M:Y).push(e),e.observers&&Lt(e))}}function Be(t){let e;if(t.sources)for(;t.sources.length;){var r,s,n=t.sources.pop(),o=t.sourceSlots.pop(),i=n.observers;i&&i.length&&(r=i.pop(),s=n.observerSlots.pop(),o<i.length)&&(i[r.sourceSlots[s]=o]=r,n.observerSlots[o]=s)}if(t.owned){for(e=t.owned.length-1;0<=e;e--)Be(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;0<=e;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function jt(t){throw t}const rr=Symbol("fallback");function ot(t){for(let e=0;e<t.length;e++)t[e]()}function S(t,e){return X(()=>t(e||{}))}function xe(){return!0}const We={get:(t,e,r)=>e===Oe?r:t.get(e),has:(t,e)=>e===Oe||t.has(e),set:xe,deleteProperty:xe,getOwnPropertyDescriptor:(t,e)=>({configurable:!0,enumerable:!0,get:()=>t.get(e),set:xe,deleteProperty:xe}),ownKeys:t=>t.keys()};function Fe(t){return(t=typeof t=="function"?t():t)||{}}function ye(...t){let e=!1;for(let n=0;n<t.length;n++){var r=t[n];e=e||!!r&&Oe in r,t[n]=typeof r=="function"?(e=!0,q(r)):r}if(e)return new Proxy({get(n){for(let i=t.length-1;0<=i;i--){var o=Fe(t[i])[n];if(o!==void 0)return o}},has(n){for(let o=t.length-1;0<=o;o--)if(n in Fe(t[o]))return!0;return!1},keys(){var n=[];for(let o=0;o<t.length;o++)n.push(...Object.keys(Fe(t[o])));return[...new Set(n)]}},We);var s={};for(let n=t.length-1;0<=n;n--)if(t[n])for(const o in Object.getOwnPropertyDescriptors(t[n]))o in s||Object.defineProperty(s,o,{enumerable:!0,get(){for(let a=t.length-1;0<=a;a--){var i=(t[a]||{})[o];if(i!==void 0)return i}}});return s}function et(t,...e){const r=new Set(e.flat());var s;if(Oe in t)return(s=e.map(o=>new Proxy({get:i=>o.includes(i)?t[i]:void 0,has:i=>o.includes(i)&&i in t,keys:()=>o.filter(i=>i in t)},We))).push(new Proxy({get:o=>r.has(o)?void 0:t[o],has:o=>!r.has(o)&&o in t,keys:()=>Object.keys(t).filter(o=>!r.has(o))},We)),s;const n=Object.getOwnPropertyDescriptors(t);return e.push(Object.keys(n).filter(o=>!r.has(o))),e.map(o=>{var i={};for(let a=0;a<o.length;a++){const l=o[a];l in t&&Object.defineProperty(i,l,n[l]||{get:()=>t[l],set:()=>!0,enumerable:!0})}return i})}function it(t){var e="fallback"in t&&{fallback:()=>t.fallback};return q(function(r,s,n={}){let o=[],i=[],a=[],l=0,c=1<s.length?[]:null;return Qe(()=>ot(a)),()=>{let h,u,p=r()||[];return p[er],X(()=>{let d,b,k,y,g,C,v,A,j,w=p.length;if(w===0)l!==0&&(ot(a),a=[],o=[],i=[],l=0,c=c&&[]),n.fallback&&(o=[rr],i[0]=Ce(P=>(a[0]=P,n.fallback())),l=1);else if(l===0){for(i=new Array(w),u=0;u<w;u++)o[u]=p[u],i[u]=Ce(f);l=w}else{for(k=new Array(w),y=new Array(w),c&&(g=new Array(w)),C=0,v=Math.min(l,w);C<v&&o[C]===p[C];C++);for(v=l-1,A=w-1;v>=C&&A>=C&&o[v]===p[A];v--,A--)k[A]=i[v],y[A]=a[v],c&&(g[A]=c[v]);for(d=new Map,b=new Array(A+1),u=A;u>=C;u--)j=p[u],h=d.get(j),b[u]=h===void 0?-1:h,d.set(j,u);for(h=C;h<=v;h++)j=o[h],(u=d.get(j))!==void 0&&u!==-1?(k[u]=i[h],y[u]=a[h],c&&(g[u]=c[h]),u=b[u],d.set(j,u)):a[h]();for(u=C;u<w;u++)u in k?(i[u]=k[u],a[u]=y[u],c&&(c[u]=g[u],c[u](u))):i[u]=Ce(f);i=i.slice(0,l=w),o=p.slice(0)}return i});function f(d){var b;return a[u]=d,c?([d,b]=z(u),c[u]=b,s(p[u],d)):s(p[u])}}}(()=>t.each,t.children,e||void 0))}function K(t){const e=t.keyed,r=q(()=>t.when,void 0,{equals:(s,n)=>e?s===n:!s==!n});return q(()=>{const s=r();if(s){const n=t.children;return typeof n=="function"&&0<n.length?X(()=>n(e?s:()=>{if(X(r))return t.when;throw(o=>`Stale read from <${o}>.`)("Show")})):n}return t.fallback},void 0,void 0)}const sr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),nr=new Set(["innerHTML","textContent","innerText","children"]),or=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ir=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}}),ar=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),lr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},at="_$DX_DELEGATE";function O(t,e,r){let s;const n=()=>{var o=document.createElement("template");return o.innerHTML=t,(r?o.content.firstChild:o.content).firstChild};return(e=e?()=>(s=s||n()).cloneNode(!0):()=>X(()=>document.importNode(s=s||n(),!0))).cloneNode=e}function me(t,e=window.document){var r=e[at]||(e[at]=new Set);for(let n=0,o=t.length;n<o;n++){var s=t[n];r.has(s)||(r.add(s),e.addEventListener(s,cr))}}function Q(t,e,r){r==null?t.removeAttribute(e):t.setAttribute(e,r)}function se(t,e){e==null?t.removeAttribute("class"):t.className=e}function ze(t,e={},r,s){const n={};return s||L(()=>n.children=pe(t,e.children,n.children)),L(()=>e.ref&&e.ref(t)),L(()=>function(o,i,a,l,c={},h=!1){i=i||{};for(const p in c)p in i||p!=="children"&&(c[p]=ct(o,p,null,c[p],a,h));for(const p in i){var u;p==="children"?l||pe(o,i.children):(u=i[p],c[p]=ct(o,p,u,c[p],a,h))}}(t,e,r,!0,n,!0)),n}function Z(t,e,r){return X(()=>t(e,r))}function R(t,e,r,s){if(r!==void 0&&(s=s||[]),typeof e!="function")return pe(t,e,s,r);L(n=>pe(t,e(),n,r),s)}function lt(t,e,r){var s=e.trim().split(/\s+/);for(let n=0,o=s.length;n<o;n++)t.classList.toggle(s[n],r)}function ct(t,e,r,s,n,o){let i,a,l,c,h;var u;return e==="style"?function(p,f,d){if(!f)return d?Q(p,"style"):f;var b=p.style;if(typeof f=="string")return b.cssText=f;let k,y;for(y in typeof d=="string"&&(b.cssText=d=void 0),f=f||{},d=d||{})f[y]==null&&b.removeProperty(y),delete d[y];for(y in f)(k=f[y])!==d[y]&&(b.setProperty(y,k),d[y]=k);return d}(t,r,s):e==="classList"?function(p,f,d={}){var b=Object.keys(f||{}),k=Object.keys(d);let y,g;for(y=0,g=k.length;y<g;y++){var C=k[y];C&&C!=="undefined"&&!f[C]&&(lt(p,C,!1),delete d[C])}for(y=0,g=b.length;y<g;y++){var v=b[y],A=!!f[v];v&&v!=="undefined"&&d[v]!==A&&A&&(lt(p,v,!0),d[v]=A)}return d}(t,r,s):r===s?s:(e==="ref"?o||r(t):e.slice(0,3)==="on:"?(o=e.slice(3),s&&t.removeEventListener(o,s),r&&t.addEventListener(o,r)):e.slice(0,10)==="oncapture:"?(o=e.slice(10),s&&t.removeEventListener(o,s,!0),r&&t.addEventListener(o,r,!0)):e.slice(0,2)==="on"?(o=e.slice(2).toLowerCase(),!(u=ar.has(o))&&s&&(s=Array.isArray(s)?s[0]:s,t.removeEventListener(o,s)),(u||r)&&(function(p,f,d,b){if(b)Array.isArray(d)?(p["$$"+f]=d[0],p[`$$${f}Data`]=d[1]):p["$$"+f]=d;else if(Array.isArray(d)){const k=d[0];p.addEventListener(f,d[0]=y=>k.call(p,d[1],y))}else p.addEventListener(f,d)}(t,o,r,u),u)&&me([o])):e.slice(0,5)==="attr:"?Q(t,e.slice(5),r):(h=e.slice(0,5)==="prop:")||(l=nr.has(e))||!n&&((c=function(p,f){return typeof(p=ir[p])=="object"?p[f]?p.$:void 0:p}(e,t.tagName))||(a=sr.has(e)))||(i=t.nodeName.includes("-"))?(h&&(e=e.slice(5),a=!0),e==="class"||e==="className"?se(t,r):!i||a||l?t[c||e]=r:t[function(p){return p.toLowerCase().replace(/-([a-z])/g,(f,d)=>d.toUpperCase())}(e)]=r):(s=n&&-1<e.indexOf(":")&&lr[e.split(":")[0]])?function(p,f,d,b){b==null?p.removeAttributeNS(f,d):p.setAttributeNS(f,d,b)}(t,s,e,r):Q(t,or[e]||e,r),r)}function cr(t){var e="$$"+t.type;let r=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==r&&Object.defineProperty(t,"target",{configurable:!0,value:r}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>r||document});r;){var s=r[e];if(s&&!r.disabled){var n=r[e+"Data"];if(n!==void 0?s.call(r,n,t):s.call(r,t),t.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function pe(t,e,r,s,n){for(;typeof r=="function";)r=r();if(e!==r){var o=typeof e,i=s!==void 0;if(t=i&&r[0]&&r[0].parentNode||t,o=="string"||o=="number")if(o=="number"&&(e=e.toString()),i){let a=r[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),r=ae(t,r,s,a)}else r=r!==""&&typeof r=="string"?t.firstChild.data=e:t.textContent=e;else if(e==null||o=="boolean")r=ae(t,r,s);else{if(o=="function")return L(()=>{let a=e();for(;typeof a=="function";)a=a();r=pe(t,a,r,s)}),()=>r;if(Array.isArray(e)){const a=[];if(o=r&&Array.isArray(r),Ue(a,e,r,n))return L(()=>r=pe(t,a,r,s,!0)),()=>r;if(a.length===0){if(r=ae(t,r,s),i)return r}else o?r.length===0?ht(t,a,s):function(l,c,h){let u=h.length,p=c.length,f=u,d=0,b=0,k=c[p-1].nextSibling,y=null;for(;d<p||b<f;)if(c[d]===h[b])d++,b++;else{for(;c[p-1]===h[f-1];)p--,f--;if(p===d)for(var g=f<u?b?h[b-1].nextSibling:h[f-b]:k;b<f;)l.insertBefore(h[b++],g);else if(f===b)for(;d<p;)y&&y.has(c[d])||c[d].remove(),d++;else if(c[d]===h[f-1]&&h[b]===c[p-1]){var C=c[--p].nextSibling;l.insertBefore(h[b++],c[d++].nextSibling),l.insertBefore(h[--f],C),c[p]=h[f]}else{if(!y){y=new Map;let j=b;for(;j<f;)y.set(h[j],j++)}var v=y.get(c[d]);if(v!=null)if(b<v&&v<f){let j,w=d,P=1;for(;++w<p&&w<f&&(j=y.get(c[w]))!=null&&j===v+P;)P++;if(P>v-b)for(var A=c[d];b<v;)l.insertBefore(h[b++],A);else l.replaceChild(h[b++],c[d++])}else d++;else c[d++].remove()}}}(t,r,a):(r&&ae(t),ht(t,a));r=a}else if(e instanceof Node){if(Array.isArray(r)){if(i)return r=ae(t,r,s,e);ae(t,r,null,e)}else r!=null&&r!==""&&t.firstChild?t.replaceChild(e,t.firstChild):t.appendChild(e);r=e}else console.warn("Unrecognized value. Skipped inserting",e)}}return r}function Ue(t,e,r,s){let n=!1;for(let i=0,a=e.length;i<a;i++){let l=e[i],c=r&&r[i];if(l instanceof Node)t.push(l);else if(l!=null&&l!==!0&&l!==!1)if(Array.isArray(l))n=Ue(t,l,c)||n;else if(typeof l=="function")if(s){for(;typeof l=="function";)l=l();n=Ue(t,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||n}else t.push(l),n=!0;else{var o=String(l);c&&c.nodeType===3?(c.data=o,t.push(c)):t.push(document.createTextNode(o))}}return n}function ht(t,e,r=null){for(let s=0,n=e.length;s<n;s++)t.insertBefore(e[s],r)}function ae(t,e,r,s){if(r===void 0)return t.textContent="";var n=s||document.createTextNode("");if(e.length){let a=!1;for(let l=e.length-1;0<=l;l--){var o,i=e[l];n!==i?(o=i.parentNode===t,a||l?o&&i.remove():o?t.replaceChild(n,i):t.insertBefore(n,r)):a=!0}}else t.insertBefore(n,r);return[n]}function hr(t){return(e,r)=>{const s=r.element;return Ce(n=>{const o=function(a){var l=Object.keys(a),c={};for(let h=0;h<l.length;h++){const[u,p]=z(a[l[h]]);Object.defineProperty(c,l[h],{get:u,set(f){p(()=>f)}})}return c}(e);s.addPropertyChangedCallback((a,l)=>o[a]=l),s.addReleaseCallback(()=>{s.renderRoot.textContent="",n()});var i=t(o,r);return R(s.renderRoot,i)},function(n){if(n.assignedSlot&&n.assignedSlot._$owner)return n.assignedSlot._$owner;let o=n.parentNode;for(;o&&!o._$owner&&(!o.assignedSlot||!o.assignedSlot._$owner);)o=o.parentNode;return(o&&o.assignedSlot?o.assignedSlot:n)._$owner}(s))}}function ut(t,e,r){return arguments.length===2&&(r=e,e={}),Zt(t,e)(hr(r))}const pt={chatflowid:"",apiHost:void 0,chatflowConfig:void 0,theme:void 0};var m,x,Le='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.my-2{margin-bottom:8px;margin-top:8px}.-ml-1{margin-left:-4px}.mb-2{margin-bottom:8px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.block{display:block}.flex{display:flex}.hidden{display:none}.h-10{height:40px}.h-12{height:48px}.h-16{height:64px}.h-2{height:8px}.h-32{height:128px}.h-5{height:20px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-full{min-height:100%}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-5{width:20px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-full{width:100%}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.border{border-width:1px}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:16px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.pt-10{padding-top:40px}.text-left{text-align:left}.text-center{text-align:center}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-input{background-color:#fff;border-radius:var(--chatbot-border-radius);box-shadow:0 2px 6px -1px rgba(0,0,0,.1);color:#303235}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}';const Nt=t=>t==null,dt=t=>t!=null,zt=async t=>{try{var e=typeof t=="string"?t:t.url,r=await fetch(e,{method:typeof t=="string"?"GET":t.method,mode:"cors",headers:typeof t!="string"&&dt(t.body)?{"Content-Type":"application/json"}:void 0,body:typeof t!="string"&&dt(t.body)?JSON.stringify(t.body):void 0}),s=await r.json();if(r.ok)return{data:s};throw"error"in s?s.error:s}catch(n){return console.error(n),{error:n}}},ur=O('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),pr=O('<img alt="Bubble button icon">'),dr=O('<button part="button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),fr=t=>{{const e=dr(),r=e.firstChild;return e.$$click=()=>t.toggleBot(),e.style.setProperty("z-index","42424242"),R(e,S(K,{get when(){return Nt(t.customIconSrc)},keyed:!0,get children(){const s=ur();return L(n=>{var o=t.iconColor??"white",i="stroke-2 fill-transparent absolute duration-200 transition "+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+(t.size==="large"?" w-9":" w-7");return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("stroke",o):s.style.removeProperty("stroke")),i!==n._v$2&&Q(s,"class",n._v$2=i),n},{_v$:void 0,_v$2:void 0}),s}}),r),R(e,S(K,{get when(){return t.customIconSrc},get children(){const s=pr();return L(n=>{var o=t.customIconSrc,i="rounded-full object-cover"+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+(t.size==="large"?" w-9 h-9":" w-7 h-7");return o!==n._v$3&&Q(s,"src",n._v$3=o),i!==n._v$4&&se(s,n._v$4=i),n},{_v$3:void 0,_v$4:void 0}),s}}),r),L(s=>{var n="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+(t.size==="large"?" w-16 h-16":" w-12 h-12"),o=t.backgroundColor??"#3B81F6",i=t.right?t.right.toString()+"px":"20px",a=t.bottom?t.bottom.toString()+"px":"20px",l=t.iconColor??"white",c="absolute duration-200 transition "+(t.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+(t.size==="large"?" w-9":" w-7");return n!==s._v$5&&se(e,s._v$5=n),o!==s._v$6&&((s._v$6=o)!=null?e.style.setProperty("background-color",o):e.style.removeProperty("background-color")),i!==s._v$7&&((s._v$7=i)!=null?e.style.setProperty("right",i):e.style.removeProperty("right")),a!==s._v$8&&((s._v$8=a)!=null?e.style.setProperty("bottom",a):e.style.removeProperty("bottom")),l!==s._v$9&&((s._v$9=l)!=null?r.style.setProperty("fill",l):r.style.removeProperty("fill")),c!==s._v$10&&Q(r,"class",s._v$10=c),s},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),e}},gr=(me(["click"]),({chatflowid:t,apiHost:e="http://localhost:3000",body:r})=>zt({method:"POST",url:e+"/api/v1/prediction/"+t,body:r})),br=O('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" type="text">'),yr=t=>{const[e,r]=et(t,["ref","onInput"]);return(s=br()).$$input=o=>e.onInput(o.currentTarget.value),typeof(n=t.ref)=="function"?Z(n,s):t.ref=s,ze(s,ye({get style(){return{"font-size":t.fontSize?t.fontSize+"px":"16px"}}},r),!1,!1),s;var s,n},mr=(me(["input"]),O('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">')),vr=t=>{return ze(e=mr(),ye({get style(){return{fill:t.color??"#3B81F6"}}},t),!0,!0),e;var e},wr=O('<button type="submit">'),xr=O('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),kr=t=>{return ze(e=wr(),ye({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"}}),!1,!0),R(e,S(K,{get when(){return!t.isLoading},get fallback(){return S(_r,{class:"text-white"})},get children(){return S(vr,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},_r=t=>{return ze(e=xr(),ye(t,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+t.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),e;var e},[je,Is]=z(),Cr=O("<span>Send"),Sr=O('<div class="flex items-end justify-between chatbot-input" data-testid="input">'),Ar=t=>{const[e,r]=z(t.defaultValue??"");let s;const n=a=>r(a),o=()=>{e()!==""&&(s!=null&&s.reportValidity())&&t.onSubmit(e()),r("")},i=a=>{var l=a.isComposing||a.keyCode===229;a.key!=="Enter"||l||o()};ne(()=>{!je()&&s&&s.focus()});{const a=Sr();return a.$$keydown=i,a.style.setProperty("border-top","1px solid #eeeeee"),a.style.setProperty("position","absolute"),a.style.setProperty("left","20px"),a.style.setProperty("right","20px"),a.style.setProperty("bottom","40px"),a.style.setProperty("margin","auto"),a.style.setProperty("z-index","1000"),R(a,S(yr,{ref(l){typeof s=="function"?s(l):s=l},onInput:n,get value(){return e()},get fontSize(){return t.fontSize},get placeholder(){return t.placeholder??"Type your question"}}),null),R(a,S(kr,{get sendButtonColor(){return t.sendButtonColor},type:"button",get isDisabled(){return e()===""},class:"my-2 ml-2","on:click":o,get children(){var l=Cr();return l.style.setProperty("font-family","Poppins, sans-serif"),l}}),null),L(l=>{var c=t.backgroundColor??"#ffffff",h=t.textColor??"#303235";return c!==l._v$&&((l._v$=c)!=null?a.style.setProperty("background-color",c):a.style.removeProperty("background-color")),h!==l._v$2&&((l._v$2=h)!=null?a.style.setProperty("color",h):a.style.removeProperty("color")),l},{_v$:void 0,_v$2:void 0}),a}},Er=(me(["keydown"]),O('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">')),Or=()=>{{const t=Er(),e=t.firstChild;return L(r=>{var s="flex justify-center items-center rounded-full text-white relative "+(je()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),n="absolute top-0 left-0 "+(je()?" w-6 h-6 text-sm":"w-full h-full text-xl");return s!==r._v$&&se(t,r._v$=s),n!==r._v$2&&Q(e,"class",r._v$2=n),r},{_v$:void 0,_v$2:void 0}),t}},Pr=O('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),It=t=>{const[e,r]=z(t.initialAvatarSrc);return ue(()=>{var s,n;(s=e())!=null&&s.startsWith("{{")&&((n=t.initialAvatarSrc)!=null&&n.startsWith("http"))&&r(t.initialAvatarSrc)}),S(K,{get when(){return(s=>s!=null&&s!=="")(e())},keyed:!0,get fallback(){return S(Or,{})},get children(){const s=Pr(),n=s.firstChild;return L(o=>{var i="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(je()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),a=e();return i!==o._v$&&se(s,o._v$=i),a!==o._v$2&&Q(n,"src",o._v$2=a),o},{_v$:void 0,_v$2:void 0}),s}})};class H{constructor(e,r=""){this.source=e.source,this.flags=r}setGroup(e,r){let s=typeof r=="string"?r:r.source;return s=s.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(e,s),this}getRegexp(){return new RegExp(this.source,this.flags)}}const $r=/[&<>"']/,Rr=/[&<>"']/g,ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tr=/[<>"']|&(?!#?\w+;)/,Br=/[<>"']|&(?!#?\w+;)/g;function Lr(t,e){if(e){if($r.test(t))return t.replace(Rr,r=>ft[r])}else if(Tr.test(t))return t.replace(Br,r=>ft[r]);return t}function jr(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,r){return(r=r.toLowerCase())==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""})}(function(t){t[t.space=1]="space",t[t.text=2]="text",t[t.paragraph=3]="paragraph",t[t.heading=4]="heading",t[t.listStart=5]="listStart",t[t.listEnd=6]="listEnd",t[t.looseItemStart=7]="looseItemStart",t[t.looseItemEnd=8]="looseItemEnd",t[t.listItemStart=9]="listItemStart",t[t.listItemEnd=10]="listItemEnd",t[t.blockquoteStart=11]="blockquoteStart",t[t.blockquoteEnd=12]="blockquoteEnd",t[t.code=13]="code",t[t.table=14]="table",t[t.html=15]="html",t[t.hr=16]="hr"})(m=m||{});class Mt{constructor(e){this.options=e||V.options}code(e,r,s,n){this.options.highlight&&(o=this.options.highlight(e,r))!=null&&o!==e&&(s=!0,e=o);var o=s?e:this.options.escape(e,!0);return r?`
<pre><code class="${this.options.langPrefix+this.options.escape(r,!0)}">${o}
</code></pre>
`:`
<pre><code>${o}
</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,s){return`<h${r} id="${this.options.headerPrefix+s.toLowerCase().replace(/[^\w]+/g,"-")}">${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r){return`
<${r=r?"ol":"ul"}>
${e}</${r}>
`}listitem(e){return"<li>"+e+`</li>
`}paragraph(e){return"<p>"+e+`</p>
`}table(e,r){return`
<table>
<thead>
${e}</thead>
<tbody>
${r}</tbody>
</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,r){var s=r.header?"th":"td";return(r.align?"<"+s+' style="text-align:'+r.align+'">':"<"+s+">")+e+"</"+s+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,r,s){if(this.options.sanitize){let o;try{o=decodeURIComponent(this.options.unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch{return s}if(o.indexOf("javascript:")===0||o.indexOf("vbscript:")===0||o.indexOf("data:")===0)return s}let n='<a href="'+e+'"';return r&&(n+=' title="'+r+'"'),n+">"+s+"</a>"}image(e,r,s){let n='<img src="'+e+'" alt="'+s+'"';return r&&(n+=' title="'+r+'"'),n+(this.options.xhtml?"/>":">")}text(e){return e}}class J{constructor(e,r,s=V.options,n){if(this.staticThis=e,this.links=r,this.options=s,this.renderer=n||this.options.renderer||new Mt(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(e,r,s){return new this(this,r,s).output(e)}static getRulesBase(){var e;return this.rulesBase||((e={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new H(e.link).setGroup("inside",e._inside).setGroup("href",e._href).getRegexp(),e.reflink=new H(e.reflink).setGroup("inside",e._inside).getRegexp(),this.rulesBase=e)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic=Object.assign(Object.assign({},this.getRulesBase()),{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}))}static getRulesGfm(){var e,r,s;return this.rulesGfm||(e=this.getRulesBase(),r=new H(e.escape).setGroup("])","~|])").getRegexp(),s=new H(e.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm=Object.assign(Object.assign({},e),{escape:r,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s}))}static getRulesBreaks(){var e,r;return this.rulesBreaks||(e=this.getRulesGfm(),r=this.getRulesGfm(),this.rulesBreaks=Object.assign(Object.assign({},r),{br:new H(e.br).setGroup("{2,}","*").getRegexp(),text:new H(r.text).setGroup("{2,}","*").getRegexp()}))}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=this.rules.url!==void 0}output(e){let r,s="";for(;e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(e)){let i,a;e=e.substring(r[0].length),a=r[2]==="@"?(i=this.options.escape(r[1].charAt(6)===":"?this.mangle(r[1].substring(7)):this.mangle(r[1])),this.mangle("mailto:")+i):i=this.options.escape(r[1]),s+=this.renderer.link(a,null,i)}else if(!this.inLink&&this.hasRulesGfm&&(r=this.rules.url.exec(e)))e=e.substring(r[0].length),n=this.options.escape(r[1]),s+=this.renderer.link(n,null,n);else if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):this.options.escape(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if(r=(r=this.rules.reflink.exec(e))||this.rules.nolink.exec(e)){e=e.substring(r[0].length);var n=(r[2]||r[1]).replace(/\s+/g," "),o=this.links[n.toLowerCase()];o&&o.href?(this.inLink=!0,s+=this.outputLink(r,o),this.inLink=!1):(s+=r[0].charAt(0),e=r[0].substring(1)+e)}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),s+=this.renderer.codespan(this.options.escape(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),s+=this.renderer.br();else if(this.hasRulesGfm&&(r=this.rules.del.exec(e)))e=e.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),s+=this.renderer.text(this.options.escape(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return s}outputLink(e,r){var s=this.options.escape(r.href);return r=r.title?this.options.escape(r.title):null,e[0].charAt(0)!=="!"?this.renderer.link(s,r,this.output(e[1])):this.renderer.image(s,r,this.options.escape(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e}mangle(e){if(!this.options.mangle)return e;let r="";var s=e.length;for(let n=0;n<s;n++){let o;.5<Math.random()&&(o="x"+e.charCodeAt(n).toString(16)),r+="&#"+o+";"}return r}}J.rulesBase=null,J.rulesPedantic=null,J.rulesGfm=null,J.rulesBreaks=null;class Ge{constructor(e){this.simpleRenderers=[],this.line=0,this.tokens=[],this.token=null,this.options=e||V.options,this.renderer=this.options.renderer||new Mt(this.options)}static parse(e,r,s){return new this(s).parse(r,e)}parse(e,r){this.inlineLexer=new J(J,e,this.options,this.renderer),this.tokens=r.reverse();let s="";for(;this.next();)s+=this.tok();return s}debug(e,r){this.inlineLexer=new J(J,e,this.options,this.renderer),this.tokens=r.reverse();let s="";for(;this.next();){var n=this.tok();this.token.line=this.line+=n.split(`
`).length-1,s+=n}return s}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let e=this.token.text;for(var r;(r=this.getNextElement())&&r.type==m.text;)e+=`
`+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case m.space:return"";case m.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case m.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case m.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case m.listStart:{let n="";for(var e=this.token.ordered;this.next().type!=m.listEnd;)n+=this.tok();return this.renderer.list(n,e)}case m.listItemStart:{let n="";for(;this.next().type!=m.listItemEnd;)n+=this.token.type==m.text?this.parseText():this.tok();return this.renderer.listitem(n)}case m.looseItemStart:{let n="";for(;this.next().type!=m.listItemEnd;)n+=this.tok();return this.renderer.listitem(n)}case m.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case m.table:{e="";let n,o="";n="";for(let i=0;i<this.token.header.length;i++){var r={header:!0,align:this.token.align[i]},s=this.inlineLexer.output(this.token.header[i]);n+=this.renderer.tablecell(s,r)}e+=this.renderer.tablerow(n);for(const i of this.token.cells){n="";for(let a=0;a<i.length;a++)n+=this.renderer.tablecell(this.inlineLexer.output(i[a]),{header:!1,align:this.token.align[a]});o+=this.renderer.tablerow(n)}return this.renderer.table(e,o)}case m.blockquoteStart:{let n="";for(;this.next().type!=m.blockquoteEnd;)n+=this.tok();return this.renderer.blockquote(n)}case m.hr:return this.renderer.hr();case m.html:return e=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(e);default:if(this.simpleRenderers.length){for(let n=0;n<this.simpleRenderers.length;n++)if(this.token.type=="simpleRule"+(n+1))return this.simpleRenderers[n].call(this.renderer,this.token.execArr)}if(e=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(e);console.log(e)}}}class V{static setOptions(e){return Object.assign(this.options,e),this}static setBlockRule(e,r=()=>""){return he.simpleRules.push(e),this.simpleRenderers.push(r),this}static parse(e,r=this.options){try{var{tokens:s,links:n}=this.callBlockLexer(e,r);return this.callParser(s,n,r)}catch(o){return this.callMe(o)}}static debug(s,r=this.options){var{tokens:s,links:n}=this.callBlockLexer(s,r);let o=s.slice();return(r=new Ge(r)).simpleRenderers=this.simpleRenderers,r=r.debug(n,s),{tokens:o=o.map(i=>{i.type=m[i.type]||i.type;var a=i.line;return delete i.line,a?Object.assign({line:a},i):i}),links:n,result:r}}static callBlockLexer(e="",r){if(typeof e!="string")throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof e}'`);return e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,`
`).replace(/^ +$/gm,""),he.lex(e,r,!0)}static callParser(e,r,s){var n;return this.simpleRenderers.length?((n=new Ge(s)).simpleRenderers=this.simpleRenderers,n.parse(r,e)):Ge.parse(e,r,s)}static callMe(e){if(e.message+=`
Please report this to https://github.com/ts-stack/markdown`,this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(e.message+"",!0)+"</pre>";throw e}}V.options=new class{constructor(){this.gfm=!0,this.tables=!0,this.breaks=!1,this.pedantic=!1,this.sanitize=!1,this.mangle=!0,this.smartLists=!1,this.silent=!1,this.langPrefix="lang-",this.smartypants=!1,this.headerPrefix="",this.xhtml=!1,this.escape=Lr,this.unescape=jr}},V.simpleRenderers=[];class he{constructor(e,r){this.staticThis=e,this.links={},this.tokens=[],this.options=r||V.options,this.setRules()}static lex(e,r,s,n){return new this(this,r).getTokens(e,s,n)}static getRulesBase(){var e,r;return this.rulesBase||((e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new H(e.item,"gm").setGroup(/bull/g,e.bullet).getRegexp(),e.list=new H(e.list).setGroup(/bull/g,e.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+e.def.source+")").getRegexp(),r="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=new H(e.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,r).getRegexp(),e.paragraph=new H(e.paragraph).setGroup("hr",e.hr).setGroup("heading",e.heading).setGroup("lheading",e.lheading).setGroup("blockquote",e.blockquote).setGroup("tag","<"+r).setGroup("def",e.def).getRegexp(),this.rulesBase=e)}static getRulesGfm(){var e,r,s,n;return this.rulesGfm||(e=this.getRulesBase(),s=(r=Object.assign(Object.assign({},e),{fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/})).fences.source.replace("\\1","\\2"),n=e.list.source.replace("\\1","\\3"),r.paragraph=new H(e.paragraph).setGroup("(?!",`(?!${s}|${n}|`).getRegexp(),this.rulesGfm=r)}static getRulesTable(){return this.rulesTables||(this.rulesTables=Object.assign(Object.assign({},this.getRulesGfm()),{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}))}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=this.rules.fences!==void 0,this.hasRulesTables=this.rules.table!==void 0}getTokens(e,r,s){let n,o=e;e:for(;o;)if((n=this.rules.newline.exec(o))&&(o=o.substring(n[0].length),1<n[0].length)&&this.tokens.push({type:m.space}),n=this.rules.code.exec(o)){o=o.substring(n[0].length);var i=n[0].replace(/^ {4}/gm,"");this.tokens.push({type:m.code,text:this.options.pedantic?i:i.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(n=this.rules.fences.exec(o)))o=o.substring(n[0].length),this.tokens.push({type:m.code,meta:n[2],lang:n[3],text:n[4]||""});else if(n=this.rules.heading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:m.heading,depth:n[1].length,text:n[2]});else if(r&&this.hasRulesTables&&(n=this.rules.nptable.exec(o))){o=o.substring(n[0].length);var a={type:m.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let g=0;g<a.align.length;g++)/^ *-+: *$/.test(a.align[g])?a.align[g]="right":/^ *:-+: *$/.test(a.align[g])?a.align[g]="center":/^ *:-+ *$/.test(a.align[g])?a.align[g]="left":a.align[g]=null;var l=n[3].replace(/\n$/,"").split(`
`);for(let g=0;g<l.length;g++)a.cells[g]=l[g].split(/ *\| */);this.tokens.push(a)}else if(n=this.rules.lheading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:m.heading,depth:n[2]==="="?1:2,text:n[1]});else if(n=this.rules.hr.exec(o))o=o.substring(n[0].length),this.tokens.push({type:m.hr});else if(n=this.rules.blockquote.exec(o))o=o.substring(n[0].length),this.tokens.push({type:m.blockquoteStart}),i=n[0].replace(/^ *> ?/gm,""),this.getTokens(i),this.tokens.push({type:m.blockquoteEnd});else if(n=this.rules.list.exec(o)){o=o.substring(n[0].length);var c,h=n[2],u=(this.tokens.push({type:m.listStart,ordered:1<h.length}),n[0].match(this.rules.item)),p=u.length;let g,C=!1;for(let v=0;v<p;v++){let A=u[v];c=A.length,(A=A.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf(`
 `)!==-1&&(c-=A.length,A=this.options.pedantic?A.replace(/^ {1,4}/gm,""):A.replace(new RegExp("^ {1,"+c+"}","gm"),"")),!this.options.smartLists||v===p-1||h===(c=this.staticThis.getRulesBase().bullet.exec(u[v+1])[0])||1<h.length&&1<c.length||(o=u.slice(v+1).join(`
`)+o,v=p-1),g=C||/\n\n(?!\s*$)/.test(A),v!==p-1&&(C=A.charAt(A.length-1)===`
`,g=g||C),this.tokens.push({type:g?m.looseItemStart:m.listItemStart}),this.getTokens(A,!1,s),this.tokens.push({type:m.listItemEnd})}this.tokens.push({type:m.listEnd})}else if(n=this.rules.html.exec(o)){o=o.substring(n[0].length);var f=n[1];this.tokens.push({type:this.options.sanitize?m.paragraph:m.html,pre:!this.options.sanitizer&&(f==="pre"||f==="script"||f==="style"),text:n[0]})}else if(r&&(n=this.rules.def.exec(o)))o=o.substring(n[0].length),this.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(r&&this.hasRulesTables&&(n=this.rules.table.exec(o))){o=o.substring(n[0].length);var d={type:m.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let g=0;g<d.align.length;g++)/^ *-+: *$/.test(d.align[g])?d.align[g]="right":/^ *:-+: *$/.test(d.align[g])?d.align[g]="center":/^ *:-+ *$/.test(d.align[g])?d.align[g]="left":d.align[g]=null;var b=n[3].replace(/(?: *\| *)?\n$/,"").split(`
`);for(let g=0;g<b.length;g++)d.cells[g]=b[g].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(d)}else{if(this.staticThis.simpleRules.length){var k=this.staticThis.simpleRules;for(let g=0;g<k.length;g++)if(n=k[g].exec(o)){o=o.substring(n[0].length);var y="simpleRule"+(g+1);this.tokens.push({type:y,execArr:n});continue e}}if(r&&(n=this.rules.paragraph.exec(o)))o=o.substring(n[0].length),n[1].slice(-1)===`
`?this.tokens.push({type:m.paragraph,text:n[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?m.paragraph:m.text,text:n[1]});else if(n=this.rules.text.exec(o))o=o.substring(n[0].length),this.tokens.push({type:m.text,text:n[0]});else if(o)throw new Error("Infinite loop on byte: "+o.charCodeAt(0)+`, near text '${o.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}he.simpleRules=[],he.rulesBase=null,he.rulesGfm=null,he.rulesTables=null;const Nr=O('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),zr=(V.setOptions({isNoP:!0}),t=>{let e;ne(()=>{e&&(e.innerHTML=V.parse(t.message))});{const r=Nr(),s=r.firstChild;return r.style.setProperty("margin-left","50px"),typeof e=="function"?Z(e,s):e=s,s.style.setProperty("border-radius","6px"),R(r,S(K,{get when(){return t.showAvatar},get children(){return S(It,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),L(n=>{var o=t.backgroundColor??"#3B81F6",i=t.textColor??"#ffffff";return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("background-color",o):s.style.removeProperty("background-color")),i!==n._v$2&&((n._v$2=i)!=null?s.style.setProperty("color",i):s.style.removeProperty("color")),n},{_v$:void 0,_v$2:void 0}),r}}),Ir=O('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-2 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Mr=(V.setOptions({isNoP:!0}),t=>{let e;ne(()=>{e&&(e.innerHTML=V.parse(t.message))});{const r=Ir(),s=r.firstChild;return r.style.setProperty("margin-right","50px"),R(r,S(K,{get when(){return t.showAvatar},get children(){return S(It,{get initialAvatarSrc(){return t.avatarSrc}})}}),s),typeof e=="function"?Z(e,s):e=s,s.style.setProperty("border-radius","6px"),L(n=>{var o=t.backgroundColor??"#f7f8ff",i=t.textColor??"#303235";return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("background-color",o):s.style.removeProperty("background-color")),i!==n._v$2&&((n._v$2=i)!=null?s.style.setProperty("color",i):s.style.removeProperty("color")),n},{_v$:void 0,_v$2:void 0}),r}}),qr=O('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),Dr=()=>qr(),Fr=O('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Gr=()=>{return R((t=Fr()).firstChild,S(Dr,{})),t;var t},Hr=O('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Wr=t=>{return r=(e=Hr()).firstChild,e.$$click=()=>{var s;return(s=t.onSourceClick)==null?void 0:s.call(t)},r.style.setProperty("width","max-content"),r.style.setProperty("max-width","80px"),r.style.setProperty("font-size","13px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),R(r,()=>t.pageContent),e;var e,r},Ur=(me(["click"]),O('<span>Powered by<a href="https://flowiseai.com" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span> Flowise')),gt="#303235",Vr=t=>{let e,r;const s=n=>{n.forEach(o=>{o.removedNodes.forEach(i=>{var a;"id"in i&&e&&i.id=="lite-badge"&&(console.log("Sorry, you can't remove the brand "),(a=t.botContainer)==null||a.append(e))})})};ne(()=>{document&&t.botContainer&&(r=new MutationObserver(s)).observe(t.botContainer,{subtree:!1,childList:!0})}),Qe(()=>{r&&r.disconnect()});{const n=Ur(),o=n.firstChild.nextSibling;return n.style.setProperty("font-size","13px"),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","0"),n.style.setProperty("padding","10px"),n.style.setProperty("margin","auto"),n.style.setProperty("width","100%"),n.style.setProperty("text-align","center"),typeof e=="function"?Z(e,o):e=o,o.style.setProperty("font-weight","bold"),L(i=>{var a=t.poweredByTextColor??gt,l=t.badgeBackgroundColor??"#ffffff",c=t.poweredByTextColor??gt;return a!==i._v$&&((i._v$=a)!=null?n.style.setProperty("color",a):n.style.removeProperty("color")),l!==i._v$2&&((i._v$2=l)!=null?n.style.setProperty("background-color",l):n.style.removeProperty("background-color")),c!==i._v$3&&((i._v$3=c)!=null?o.style.setProperty("color",c):o.style.removeProperty("color")),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n}},W=Object.create(null),Se=(W.open="0",W.close="1",W.ping="2",W.pong="3",W.message="4",W.upgrade="5",W.noop="6",Object.create(null)),Yr=(Object.keys(W).forEach(t=>{Se[W[t]]=t}),{type:"error",data:"parser error"}),Xr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kr=typeof ArrayBuffer=="function",bt=({type:t,data:e},r,s)=>Xr&&e instanceof Blob?r?s(e):yt(e,s):Kr&&(e instanceof ArrayBuffer||(n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer)(e))?r?s(e):yt(new Blob([e]),s):s(W[t]+(e||"")),yt=(t,e)=>{const r=new FileReader;return r.onload=function(){var s=r.result.split(",")[1];e("b"+(s||""))},r.readAsDataURL(t)},Jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<64;t++)fe[Jr.charCodeAt(t)]=t;const Qr=typeof ArrayBuffer=="function",qt=(t,e)=>{var r;return typeof t!="string"?{type:"message",data:Dt(t,e)}:(r=t.charAt(0))==="b"?{type:"message",data:Zr(t.substring(1),e)}:Se[r]?1<t.length?{type:Se[r],data:t.substring(1)}:{type:Se[r]}:Yr},Zr=(t,e)=>{var r;return Qr?(r=(s=>{let n,o,i,a,l,c=.75*s.length,h=s.length,u=0;s[s.length-1]==="="&&(c--,s[s.length-2]==="=")&&c--;var p=new ArrayBuffer(c),f=new Uint8Array(p);for(n=0;n<h;n+=4)o=fe[s.charCodeAt(n)],i=fe[s.charCodeAt(n+1)],a=fe[s.charCodeAt(n+2)],l=fe[s.charCodeAt(n+3)],f[u++]=o<<2|i>>4,f[u++]=(15&i)<<4|a>>2,f[u++]=(3&a)<<6|63&l;return p})(t),Dt(r,e)):{base64:!0,data:t}},Dt=(t,e)=>e==="blob"&&t instanceof ArrayBuffer?new Blob([t]):t,mt=String.fromCharCode(30);function T(t){if(t)return function(e){for(var r in T.prototype)e[r]=T.prototype[r];return e}(t)}T.prototype.on=T.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},T.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},T.prototype.off=T.prototype.removeListener=T.prototype.removeAllListeners=T.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)this._callbacks={};else{var r=this._callbacks["$"+t];if(r)if(arguments.length==1)delete this._callbacks["$"+t];else{for(var s,n=0;n<r.length;n++)if((s=r[n])===e||s.fn===e){r.splice(n,1);break}r.length===0&&delete this._callbacks["$"+t]}}return this},T.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){s=0;for(var n=(r=r.slice(0)).length;s<n;++s)r[s].apply(this,e)}return this},T.prototype.emitReserved=T.prototype.emit,T.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},T.prototype.hasListeners=function(t){return!!this.listeners(t).length};const F=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Ft(t,...e){return e.reduce((r,s)=>(t.hasOwnProperty(s)&&(r[s]=t[s]),r),{})}const es=F.setTimeout,ts=F.clearTimeout;function Ie(t,e){e.useNativeTimers?(t.setTimeoutFn=es.bind(F),t.clearTimeoutFn=ts.bind(F)):(t.setTimeoutFn=F.setTimeout.bind(F),t.clearTimeoutFn=F.clearTimeout.bind(F))}function rs(t){return typeof t=="string"?function(e){let r,s=0;for(let n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<128?s+=1:r<2048?s+=2:r<55296||57344<=r?s+=3:(n++,s+=4);return s}(t):Math.ceil(1.33*(t.byteLength||t.size))}class ss extends Error{constructor(e,r,s){super(e),this.description=r,this.context=s,this.type="TransportError"}}class vt extends T{constructor(e){super(),this.writable=!1,Ie(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,s){return super.emitReserved("error",new ss(e,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){e=qt(e,this.socket.binaryType),this.onPacket(e)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const Gt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ve=64,ns={};let wt,xt=0,ke=0;function kt(t){let e="";for(;e=Gt[t%Ve]+e,0<(t=Math.floor(t/Ve)););return e}function _t(){var t=kt(+new Date);return t!==wt?(xt=0,wt=t):t+"."+kt(xt++)}for(;ke<Ve;ke++)ns[Gt[ke]]=ke;function Ct(t){let e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}let Ht=!1;try{Ht=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const os=Ht;function Wt(t){t=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||os))return new XMLHttpRequest}catch{}if(!t)try{return new F[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function is(){}const as=new Wt({xdomain:!1}).responseType!=null;class U extends T{constructor(e,r){super(),Ie(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e=Ft(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const r=this.xhr=new Wt(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var s in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this.opts.extraHeaders[s])}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){return void this.setTimeoutFn(()=>{this.onError(n)},0)}typeof document<"u"&&(this.index=U.requestsCount++,U.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(this.xhr!==void 0&&this.xhr!==null){if(this.xhr.onreadystatechange=is,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete U.requests[this.index],this.xhr=null}}onLoad(){var e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}U.requestsCount=0,U.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",St):typeof addEventListener=="function"&&addEventListener("onpagehide"in F?"pagehide":"unload",St,!1));function St(){for(var t in U.requests)U.requests.hasOwnProperty(t)&&U.requests[t].abort()}const Ut=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),_e=F.WebSocket||F.MozWebSocket,At=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",ls={websocket:class extends vt{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var t=this.uri(),e=this.opts.protocols,r=At?{}:Ft(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=At?new _e(t,e,r):e?new _e(t,e):new _e(t)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){var e=t[r];const s=r===t.length-1;bt(e,this.supportsBinary,n=>{try{this.ws.send(n)}catch{}s&&Ut(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.close(),this.ws=null)}uri(){var t=this.query||{},e=this.opts.secure?"wss":"ws";let r="";return this.opts.port&&(e=="wss"&&Number(this.opts.port)!==443||e=="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=_t()),this.supportsBinary||(t.b64=1),t=Ct(t),e+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(t.length?"?"+t:"")}check(){return!!_e}},polling:class extends vt{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){var e=location.protocol==="https:";let r=location.port;r=r||(e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==e}e=t&&t.forceBase64,this.supportsBinary=as&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((e,r)=>{var s=e.split(mt),n=[];for(let i=0;i<s.length;i++){var o=qt(s[i],r);if(n.push(o),o.type==="error")break}return n})(t,this.socket.binaryType).forEach(e=>{if(this.readyState==="opening"&&e.type==="open"&&this.onOpen(),e.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open")&&this.poll()}doClose(){var t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,((e,r)=>{const s=e.length,n=new Array(s);let o=0;e.forEach((i,a)=>{bt(i,!1,l=>{n[a]=l,++o===s&&r(n.join(mt))})})})(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){var t=this.query||{},e=this.opts.secure?"https":"http";let r="";return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=_t()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&(e=="https"&&Number(this.opts.port)!==443||e=="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),t=Ct(t),e+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(t.length?"?"+t:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new U(this.uri(),t)}doWrite(t,e){(t=this.request({method:"POST",data:t})).on("success",e),t.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=t}}},cs=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ye(t){var e=t,r=t.indexOf("["),s=t.indexOf("]");r!=-1&&s!=-1&&(t=t.substring(0,r)+t.substring(r,s).replace(/:/g,";")+t.substring(s,t.length));let n=cs.exec(t||""),o={},i=14;for(;i--;)o[hs[i]]=n[i]||"";return r!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(a,l){var c=l.replace(/\/{2,9}/g,"/").split("/");return l.slice(0,1)!="/"&&l.length!==0||c.splice(0,1),l.slice(-1)=="/"&&c.splice(c.length-1,1),c}(0,o.path),o.queryKey=function(a,l){const c={};return l.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(h,u,p){u&&(c[u]=p)}),c}(0,o.query),o}let Vt=class le extends T{constructor(e,r={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=Ye(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=Ye(r.host).host),Ie(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(s){var n={},o=s.split("&");for(let a=0,l=o.length;a<l;a++){var i=o[a].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost")&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(e){var r=((r=Object.assign({},this.opts.query)).EIO=4,r.transport=e,this.id&&(r.sid=this.id),Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port}));return new ls[e](r)}open(){let e;if(this.opts.rememberUpgrade&&le.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch{return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),s=!1;le.priorWebsocketSuccess=!1;const n=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",u=>{s||(u.type==="pong"&&u.data==="probe"?(this.upgrading=!0,this.emitReserved("upgrading",r),r&&(le.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(h(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())}))):((u=new Error("probe error")).transport=r.name,this.emitReserved("upgradeError",u)))}))};function o(){s||(s=!0,h(),r.close(),r=null)}const i=u=>{(u=new Error("probe error: "+u)).transport=r.name,o(),this.emitReserved("upgradeError",u)};function a(){i("transport closed")}function l(){i("socket closed")}function c(u){r&&u.name!==r.name&&o()}const h=()=>{r.removeListener("open",n),r.removeListener("error",i),r.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};r.once("open",n),r.once("error",i),r.once("close",a),this.once("close",l),this.once("upgrading",c),r.open()}onOpen(){if(this.readyState="open",le.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let r=0;for(var e=this.upgrades.length;r<e;r++)this.probe(this.upgrades[r])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var e;this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(e=this.getWritablePackets(),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&this.transport.name==="polling"&&1<this.writeBuffer.length){let r=1;for(let s=0;s<this.writeBuffer.length;s++){var e=this.writeBuffer[s].data;if(e&&(r+=rs(e)),0<s&&r>this.maxPayload)return this.writeBuffer.slice(0,s);r+=2}}return this.writeBuffer}write(e,r,s){return this.sendPacket("message",e,r,s),this}send(e,r,s){return this.sendPacket("message",e,r,s),this}sendPacket(e,r,s,n){typeof r=="function"&&(n=r,r=void 0),typeof s=="function"&&(n=s,s=null),this.readyState!=="closing"&&this.readyState!=="closed"&&((s=s||{}).compress=s.compress!==!1,this.emitReserved("packetCreate",e={type:e,data:r,options:s}),this.writeBuffer.push(e),n&&this.once("flush",n),this.flush())}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{(this.upgrading?s:e)()}):(this.upgrading?s:e)()),this}onError(e){le.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){var r=[];let s=0;for(var n=e.length;s<n;s++)~this.transports.indexOf(e[s])&&r.push(e[s]);return r}};Vt.protocol=4;const us=typeof ArrayBuffer=="function",ps=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Yt=Object.prototype.toString,ds=typeof Blob=="function"||typeof Blob<"u"&&Yt.call(Blob)==="[object BlobConstructor]",fs=typeof File=="function"||typeof File<"u"&&Yt.call(File)==="[object FileConstructor]";function tt(t){return us&&(t instanceof ArrayBuffer||ps(t))||ds&&t instanceof Blob||fs&&t instanceof File}function Ae(t,e){if(t&&typeof t=="object")if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(Ae(t[r]))return!0}else{if(tt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ae(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Ae(t[r]))return!0}return!1}function gs(t){var e=[],r=t.data;return t.data=Xe(r,e),t.attachments=e.length,{packet:t,buffers:e}}function Xe(t,e){if(!t)return t;var r;if(tt(t))return r={_placeholder:!0,num:e.length},e.push(t),r;if(Array.isArray(t)){var s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=Xe(t[o],e);return s}if(typeof t!="object"||t instanceof Date)return t;var n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=Xe(t[o],e));return n}function bs(t,e){return t.data=Ke(t.data,e),delete t.attachments,t}function Ke(t,e){if(t){if(t&&t._placeholder===!0){if(typeof t.num=="number"&&0<=t.num&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Ke(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Ke(t[r],e))}return t}const ys=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(x=x||{});function Et(t){return Object.prototype.toString.call(t)==="[object Object]"}class rt extends T{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var s=(r=this.decodeString(e)).type===x.BINARY_EVENT;(!s&&r.type!==x.BINARY_ACK||(r.type=s?x.EVENT:x.ACK,this.reconstructor=new ms(r),r.attachments===0))&&super.emitReserved("decoded",r)}else{if(!tt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",r))}}decodeString(e){let r=0;var s={type:Number(e.charAt(0))};if(x[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===x.BINARY_EVENT||s.type===x.BINARY_ACK){for(var n=r+1;e.charAt(++r)!=="-"&&r!=e.length;);if((n=e.substring(n,r))!=Number(n)||e.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(n)}if(e.charAt(r+1)==="/"){for(n=r+1;++r&&e.charAt(r)!==","&&r!==e.length;);s.nsp=e.substring(n,r)}else s.nsp="/";if((n=e.charAt(r+1))!==""&&Number(n)==n){for(n=r+1;++r;){var o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}s.id=Number(e.substring(n,r+1))}if(e.charAt(++r)){if(n=this.tryParse(e.substr(r)),!rt.isPayloadValid(s.type,n))throw new Error("invalid payload");s.data=n}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case x.CONNECT:return Et(r);case x.DISCONNECT:return r===void 0;case x.CONNECT_ERROR:return typeof r=="string"||Et(r);case x.EVENT:case x.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&ys.indexOf(r[0])===-1);case x.ACK:case x.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ms{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=bs(this.reconPack,this.buffers),this.finishedReconstruction(),e):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var vs=Object.freeze({__proto__:null,Decoder:rt,Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==x.EVENT&&t.type!==x.ACK||!Ae(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===x.EVENT?x.BINARY_EVENT:x.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==x.BINARY_EVENT&&t.type!==x.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){t=gs(t);var e=this.encodeAsString(t.packet);return(t=t.buffers).unshift(e),t}},get PacketType(){return x},protocol:5});function G(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const ws=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xt extends T{constructor(e,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var e;this.subs||(e=this.io,this.subs=[G(e,"open",this.onopen.bind(this)),G(e,"packet",this.onpacket.bind(this)),G(e,"error",this.onerror.bind(this)),G(e,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(ws.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');var s,n;return r.unshift(e),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((e={type:x.EVENT,data:r,options:{}}).options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"&&(s=this.ids++,n=r.pop(),this._registerAckCallback(s,n),e.id=s),n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||n&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={}):this._addToQueue(r),this}_registerAckCallback(e,r){var s=(s=this.flags.timeout)!=null?s:this._opts.ackTimeout;if(s===void 0)this.acks[e]=r;else{const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(n),r.apply(this,[null,...o])}}}emitWithAck(e,...r){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,o)=>{r.push((i,a)=>s?i?o(i):n(a):n(i)),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...o)=>{if(s===this._queue[0])return n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r)&&r(n):(this._queue.shift(),r&&r(null,...o)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){var r;!this.connected||this._queue.length===0||(r=this._queue[0]).pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:x.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case x.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case x.EVENT:case x.BINARY_EVENT:this.onevent(e);break;case x.ACK:case x.BINARY_ACK:this.onack(e);break;case x.DISCONNECT:this.ondisconnect();break;case x.CONNECT_ERROR:this.destroy();var r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){var r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(const r of this._anyListeners.slice())r.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let s=!1;return function(...n){s||(s=!0,r.packet({type:x.ACK,id:e,data:n}))}}onack(e){var r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:x.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(this._anyListeners)if(e){var r=this._anyListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(this._anyOutgoingListeners)if(e){var r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const r of this._anyOutgoingListeners.slice())r.apply(this,e.data)}}function ce(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}ce.prototype.duration=function(){var t,e,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*r),r=1&Math.floor(10*t)?r+e:r-e),0|Math.min(r,this.max)},ce.prototype.reset=function(){this.attempts=0},ce.prototype.setMin=function(t){this.ms=t},ce.prototype.setMax=function(t){this.max=t},ce.prototype.setJitter=function(t){this.jitter=t};class Je extends T{constructor(e,r){super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",this.opts=r,Ie(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!=null?s:.5),this.backoff=new ce({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;var s=r.parser||vs;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)!=null&&r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)!=null&&r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)!=null&&r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(!~this._readyState.indexOf("open")){this.engine=new Vt(this.uri,this.opts);const n=this.engine,o=this,i=(this._readyState="opening",this.skipReconnect=!1,G(n,"open",function(){o.onopen(),e&&e()}));var r=G(n,"error",a=>{o.cleanup(),o._readyState="closed",this.emitReserved("error",a),e?e(a):o.maybeReconnectOnOpen()});if(this._timeout!==!1){var s=this._timeout;s===0&&i();const a=this.setTimeoutFn(()=>{i(),n.close(),n.emit("error",new Error("timeout"))},s);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}this.subs.push(i),this.subs.push(r)}return this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(G(e,"ping",this.onping.bind(this)),G(e,"data",this.ondata.bind(this)),G(e,"error",this.onerror.bind(this)),G(e,"close",this.onclose.bind(this)),G(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){Ut(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Xt(this,e,r),this.nsps[e]=s),s}_destroy(e){for(const r of Object.keys(this.nsps))if(this.nsps[r].active)return;this._close()}_packet(e){var r=this.encoder.encode(e);for(let s=0;s<r.length;s++)this.engine.write(r[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect)||e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()})},r);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const de={};function Ee(t,e){typeof t=="object"&&(e=t,t=void 0),t=function(i,a="",l){let c=i;return l=l||typeof location<"u"&&location,typeof(i=i??l.protocol+"//"+l.host)=="string"&&(i.charAt(0)==="/"&&(i=i.charAt(1)==="/"?l.protocol+i:l.host+i),/^(https?|wss?):\/\//.test(i)||(i=l!==void 0?l.protocol+"//"+i:"https://"+i),c=Ye(i)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/",i=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host,c.id=c.protocol+"://"+i+":"+c.port+a,c.href=c.protocol+"://"+i+(l&&l.port===c.port?"":":"+c.port),c}(t,(e=e||{}).path||"/socket.io");var r=t.source,s=t.id,n=t.path;n=de[s]&&n in de[s].nsps;let o;return o=(n=e.forceNew||e["force new connection"]||e.multiplex===!1||n)?new Je(r,e):(de[s]||(de[s]=new Je(r,e)),de[s]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(Ee,{Manager:Je,Socket:Xt,io:Ee,connect:Ee});const xs=O("<style>"),ks=O('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),_s=O("<div><pre>"),Cs=t=>{let e;const[r]=et(t,["onOpen","onClose","isOpen","value"]),[s,n]=(ne(()=>{e&&(e.innerHTML=function(l){return(l=(l=typeof l!="string"?JSON.stringify(l,void 0,2):l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(c){let h="number";return/^"/.test(c)?h=/:$/.test(c)?"key":"string":/true|false/.test(c)?h="boolean":/null/.test(c)&&(h="null"),'<span class="'+h+'">'+c+"</span>"})}(JSON.stringify(t==null?void 0:t.value,void 0,2)))}),z(r.isOpen??!1)),o=(ue(()=>{Nt(t.isOpen)||t.isOpen===s()||a()}),l=>{l.stopPropagation()}),i=()=>{var l;n(!1),(l=r.onClose)==null||l.call(r),document.body.style.overflow="auto"},a=()=>{var l;s()?i():(n(!0),(l=r.onOpen)==null||l.call(r),document.body.style.overflow="hidden")};return S(K,{get when(){return s()},get children(){return[(R(h=xs(),Le),h),(h=ks(),l=h.firstChild,c=l.nextSibling.nextSibling.firstChild.firstChild,h.style.setProperty("z-index","1100"),h.addEventListener("click",i),R(l,Le),c.style.setProperty("background-color","transparent"),c.style.setProperty("margin-left","20px"),c.style.setProperty("margin-right","20px"),c.addEventListener("click",o),c.addEventListener("pointerdown",o),R(c,(()=>{const u=q(()=>!!t.value);return()=>{return u()&&(f=(p=_s()).firstChild,p.style.setProperty("background","white"),p.style.setProperty("margin","auto"),p.style.setProperty("padding","7px"),typeof(d=e)=="function"?Z(d,f):e=f,p);var p,f,d}})()),h)];var l,c,h}})},Ss=O('<div><div class="flex w-full h-full justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-full px-3 pt-10 relative scrollable-container chatbot-chat-view scroll-smooth">'),As=O("<div>"),Es=O('<div class="w-full h-32">'),He="Hi there! How can I help?",Kt=t=>{let e,r,s;const[n,o]=z(""),[i,a]=z(!1),[l,c]=z(!1),[h,u]=z({}),[p,f]=z([{message:t.welcomeMessage??He,type:"apiMessage"}],{equals:!1}),[d,b]=z(""),[k,y]=z(!1),g=(ne(()=>{r&&setTimeout(()=>{e==null||e.scrollTo(0,e.scrollHeight)},50)}),()=>{setTimeout(()=>{e==null||e.scrollTo(0,e.scrollHeight)},50)}),C=w=>{f(P=>[...P.map(($,D)=>D===P.length-1?{...$,message:$.message+w}:$)])},v=w=>{f(P=>[...P.map(($,D)=>D===P.length-1?{...$,sourceDocuments:w}:$)])},A=async w=>{if(o(w),w.trim()!==""){a(!0),g();const D=t.welcomeMessage??He;var P,$=p().filter(N=>N.message!==D);$=(f(N=>[...N,{message:w,type:"userMessage"}]),{question:w,history:$}),t.chatflowConfig&&($.overrideConfig=t.chatflowConfig),k()&&($.socketIOClientId=d());const{data:_,error:te}=await gr({chatflowid:t.chatflowid,apiHost:t.apiHost,body:$});_&&(typeof _=="object"&&_.text&&_.sourceDocuments?k()||f(N=>[...N,{message:_.text,sourceDocuments:_.sourceDocuments,type:"apiMessage"}]):k()||f(N=>[...N,{message:_,type:"apiMessage"}]),a(!1),o(""),g()),te&&(console.error(te),$=te.response.data||te.response.status+": "+te.response.statusText,P=$,f(N=>[...N,{message:P,type:"apiMessage"}]),a(!1),o(""),g())}},j=(ue(()=>{p()&&g()}),ue(()=>{t.fontSize&&s&&(s.style.fontSize=t.fontSize+"px")}),ue(async()=>{var w=(await(({chatflowid:$,apiHost:D="http://localhost:3000"})=>zt({method:"GET",url:D+"/api/v1/chatflows-streaming/"+$}))({chatflowid:t.chatflowid,apiHost:t.apiHost})).data;w&&y((w==null?void 0:w.isStreaming)??!1);const P=Ee(t.apiHost);return P.on("connect",()=>{b(P.id)}),P.on("start",()=>{f($=>[...$,{message:"",type:"apiMessage"}])}),P.on("sourceDocuments",v),P.on("token",C),()=>{o(""),a(!1),f([{message:t.welcomeMessage??He,type:"apiMessage"}]),P&&(P.disconnect(),b(""))}}),w=>{try{return new URL(w)}catch{}});return[(()=>{const w=Ss(),P=w.firstChild,$=P.firstChild;var D;return typeof(D=(typeof(D=s)=="function"?Z(D,w):s=w,e))=="function"?Z(D,$):e=$,$.style.setProperty("padding-bottom","100px"),R($,S(it,{get each(){return[...p()]},children:(_,te)=>[q((()=>{const N=q(()=>_.type==="userMessage");return()=>N()&&S(zr,{get message(){return _.message},get backgroundColor(){var E;return(E=t.userMessage)==null?void 0:E.backgroundColor},get textColor(){var E;return(E=t.userMessage)==null?void 0:E.textColor},get showAvatar(){var E;return(E=t.userMessage)==null?void 0:E.showAvatar},get avatarSrc(){var E;return(E=t.userMessage)==null?void 0:E.avatarSrc}})})()),q((()=>{const N=q(()=>_.type==="apiMessage");return()=>N()&&S(Mr,{get message(){return _.message},get backgroundColor(){var E;return(E=t.botMessage)==null?void 0:E.backgroundColor},get textColor(){var E;return(E=t.botMessage)==null?void 0:E.textColor},get showAvatar(){var E;return(E=t.botMessage)==null?void 0:E.showAvatar},get avatarSrc(){var E;return(E=t.botMessage)==null?void 0:E.avatarSrc}})})()),q((()=>{const N=q(()=>!(_.type!=="userMessage"||!i()||te()!==p().length-1));return()=>N()&&S(Gr,{})})()),q((()=>{const N=q(()=>!(!_.sourceDocuments||!_.sourceDocuments.length));return()=>{return N()&&((E=As()).style.setProperty("display","flex"),E.style.setProperty("flex-direction","row"),E.style.setProperty("width","100%"),R(E,S(it,{get each(){return[...(re=>{const oe=[],Me=[];return re.sourceDocuments.forEach(ie=>{j(ie.metadata.source)&&!oe.includes(ie.metadata.source)?(oe.push(ie.metadata.source),Me.push(ie)):j(ie.metadata.source)||Me.push(ie)}),Me})(_)]},children:re=>{const oe=j(re.metadata.source);return S(Wr,{get pageContent(){return oe?oe.pathname:re.pageContent},get metadata(){return re.metadata},onSourceClick:()=>{oe?window.open(re.metadata.source,"_blank"):(u(re),c(!0))}})}})),E);var E}})())]})),R(P,S(Ar,{get backgroundColor(){var _;return(_=t.textInput)==null?void 0:_.backgroundColor},get textColor(){var _;return(_=t.textInput)==null?void 0:_.textColor},get placeholder(){var _;return(_=t.textInput)==null?void 0:_.placeholder},get sendButtonColor(){var _;return(_=t.textInput)==null?void 0:_.sendButtonColor},get fontSize(){return t.fontSize},get defaultValue(){return n()},onSubmit:A}),null),R(w,S(Vr,{get badgeBackgroundColor(){return t.badgeBackgroundColor},get poweredByTextColor(){return t.poweredByTextColor},botContainer:s}),null),R(w,S(Os,{ref(_){typeof r=="function"?r(_):r=_}}),null),L(()=>se(w,"relative flex w-full h-full text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+t.class)),w})(),q((()=>{const w=q(()=>!!l());return()=>w()&&S(Cs,{get isOpen(){return l()},get value(){return h()},onClose:()=>c(!1)})})())]},Os=t=>{return e=Es(),typeof(r=t.ref)=="function"?Z(r,e):t.ref=e,e;var e,r},Ps=O("<style>"),$s=O('<div part="bot">'),Rs=t=>{const[e]=et(t,["theme"]),[r,s]=z(!1),[n,o]=z(!1);var i;return[(R(i=Ps(),Le),i),S(fr,ye(()=>{var a;return(a=e.theme)==null?void 0:a.button},{toggleBot:()=>{r()?s(!1):(n()||o(!0),s(!0))},get isBotOpened(){return r()}})),(()=>{const a=$s();return a.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),a.style.setProperty("transform-origin","bottom right"),a.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),a.style.setProperty("z-index","42424242"),R(a,S(K,{get when(){return n()},get children(){return S(Kt,{get badgeBackgroundColor(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.backgroundColor},get welcomeMessage(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.welcomeMessage},get poweredByTextColor(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.poweredByTextColor},get textInput(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.textInput},get botMessage(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.botMessage},get userMessage(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.userMessage},get fontSize(){var l,c;return(c=(l=e.theme)==null?void 0:l.chatWindow)==null?void 0:c.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost}})}})),L(l=>{var f,d,b,k,y,g,C,v;var c=(d=(f=e.theme)==null?void 0:f.chatWindow)!=null&&d.height?((k=(b=e.theme)==null?void 0:b.chatWindow)==null?void 0:k.height.toString())+"px":"calc(100% - 100px)",h=r()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",u=((g=(y=e.theme)==null?void 0:y.chatWindow)==null?void 0:g.backgroundColor)||"#ffffff",p="fixed sm:right-5 rounded-lg w-full sm:w-[400px] max-h-[704px]"+(r()?" opacity-1":" opacity-0 pointer-events-none")+(((v=(C=t.theme)==null?void 0:C.button)==null?void 0:v.size)==="large"?" bottom-24":" bottom-20");return c!==l._v$&&((l._v$=c)!=null?a.style.setProperty("height",c):a.style.removeProperty("height")),h!==l._v$2&&((l._v$2=h)!=null?a.style.setProperty("transform",h):a.style.removeProperty("transform")),u!==l._v$3&&((l._v$3=u)!=null?a.style.setProperty("background-color",u):a.style.removeProperty("background-color")),p!==l._v$4&&se(a,l._v$4=p),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),a})()]},Ts=O("<style>"),Bs=O("<div>"),Ls=(t,{element:e})=>{const[r,s]=z(!1),n=new IntersectionObserver(i=>{i.some(a=>a.isIntersecting)&&s(!0)});return ne(()=>{n.observe(e)}),Qe(()=>{n.disconnect()}),[(R(o=Ts(),Le),o),S(K,{get when(){return r()},get children(){const i=Bs();return i.style.setProperty("margin","0px"),R(i,S(Kt,{get badgeBackgroundColor(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.backgroundColor},get welcomeMessage(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.welcomeMessage},get poweredByTextColor(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.poweredByTextColor},get textInput(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.textInput},get botMessage(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.botMessage},get userMessage(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.userMessage},get fontSize(){var a,l;return(l=(a=t.theme)==null?void 0:a.chatWindow)==null?void 0:l.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost}})),L(a=>{var u,p,f,d,b,k,y,g,C,v;var l=((p=(u=t.theme)==null?void 0:u.chatWindow)==null?void 0:p.backgroundColor)||"#ffffff",c=(d=(f=t.theme)==null?void 0:f.chatWindow)!=null&&d.height?((k=(b=t.theme)==null?void 0:b.chatWindow)==null?void 0:k.height.toString())+"px":"100vh",h=(g=(y=t.theme)==null?void 0:y.chatWindow)!=null&&g.width?((v=(C=t.theme)==null?void 0:C.chatWindow)==null?void 0:v.width.toString())+"px":"100%";return l!==a._v$&&((a._v$=l)!=null?i.style.setProperty("background-color",l):i.style.removeProperty("background-color")),c!==a._v$2&&((a._v$2=c)!=null?i.style.setProperty("height",c):i.style.removeProperty("height")),h!==a._v$3&&((a._v$3=h)!=null?i.style.setProperty("width",h):i.style.removeProperty("width")),a},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i}})];var o},js=t=>{var e=t.id?document.getElementById(t.id):document.querySelector("flowise-fullchatbot");if(!e)throw new Error("<flowise-fullchatbot> element not found.");Object.assign(e,t)},Ns=t=>{var e=document.createElement("flowise-chatbot");Object.assign(e,t),document.body.appendChild(e)},zs=(typeof window<"u"&&(ut("flowise-fullchatbot",pt,Ls),ut("flowise-chatbot",pt,Rs)),{initFull:js,init:Ns});(t=>{typeof window<"u"&&(window.Chatbot={...t})})(zs);export{zs as default};
